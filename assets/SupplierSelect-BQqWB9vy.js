import{R as p,u as j,b as v,a as N,j as a,P as h,c as C,F as m,B as c,n as d,N as k,i as F}from"./index-DzO30t4C.js";function R({isOpen:b,setIsOpen:t,supplierId:y,setSupplierId:S,className:g,withDataTable:l}){const[s,r]=p.useState(""),[u,n]=p.useState(""),f=j(),i=v({mutationFn:e=>k({...e}),onSuccess:()=>{r(""),n(""),!l&&t(!1),f.invalidateQueries({queryKey:["suppliers-table"]})},onError:e=>{console.error(e),d.error("حدث خطأ أثناء إضافة المورد")}}),{data:o,isLoading:q}=N({queryKey:["suppliers-table"],queryFn:F}),x=[{key:"id",label:"الرمز",sortable:!0,hidden:!0},{key:"name",label:"الاسم",sortable:!0},{key:"phone",label:"الرقم",sortable:!0}];return a.jsxs(h,{title:"اختيار البائع",isOpen:b,setIsOpen:t,trigger:a.jsx(c,{type:"button",variant:"outline",className:`w-full ${g}`,children:y?s:"اختيار المورد"}),children:[l&&a.jsx(C,{title:"",pageSizeOptions:[3],defaultPageSize:3,onRowClick:e=>{S(e.id),r(e.name),t(!1)},columns:x,data:o||[]}),a.jsxs("form",{className:"space-y-2",onSubmit:e=>{e.preventDefault()},children:[a.jsx(m,{id:"supplier-name",label:"اسم المورد",value:s,onChange:e=>r(e.target.value)}),a.jsx(m,{type:"number",id:"supplier-number",label:"رقم المورد",value:u,onChange:e=>n(e.target.value)}),a.jsx(c,{type:"submit",onClick:e=>{if(e.preventDefault(),!s||!u){d.error("يرجى ملء جميع الحقول");return}i.mutate({name:s,number:u})},className:"w-full",children:i.isPending?"جاري الإضافة...":"اضافة"})]})]})}export{R as S};
