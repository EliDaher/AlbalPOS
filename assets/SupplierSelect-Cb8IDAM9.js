import{R as o,l as x,m as j,u as h,j as a,P as v,f as C,F as m,B as c,G as N,a as k}from"./index-OtN2W5jd.js";function P({isOpen:d,setIsOpen:s,supplierId:b,setSupplierId:y,className:S,withDataTable:r}){const[t,l]=o.useState(""),[u,n]=o.useState(""),g=x(),i=j({mutationFn:e=>N({...e}),onSuccess:()=>{l(""),n(""),!r&&s(!1),g.invalidateQueries({queryKey:["suppliers-table"]})},onError:e=>{console.error(e),alert("حدث خطأ أثناء إضافة المورد")}}),{data:p,isLoading:F}=h({queryKey:["suppliers-table"],queryFn:k}),f=[{key:"id",label:"الرمز",sortable:!0,hidden:!0},{key:"name",label:"الاسم",sortable:!0},{key:"phone",label:"الرقم",sortable:!0}];return a.jsxs(v,{title:"اختيار البائع",isOpen:d,setIsOpen:s,trigger:a.jsx(c,{type:"button",variant:"outline",className:`w-full ${S}`,children:b?t:"اختيار المورد"}),children:[r&&a.jsx(C,{title:"",pageSizeOptions:[3],defaultPageSize:3,onRowClick:e=>{y(e.id),l(e.name),s(!1)},columns:f,data:p||[]}),a.jsxs("form",{className:"space-y-2",onSubmit:e=>{e.preventDefault()},children:[a.jsx(m,{id:"supplier-name",label:"اسم المورد",value:t,onChange:e=>l(e.target.value)}),a.jsx(m,{type:"number",id:"supplier-number",label:"رقم المورد",value:u,onChange:e=>n(e.target.value)}),a.jsx(c,{type:"submit",onClick:()=>{if(!t||!u){alert("يرجى ملء جميع الحقول");return}i.mutate({name:t,number:u})},className:"w-full",children:i.isPending?"جاري الإضافة...":"اضافة"})]})]})}export{P as S};
